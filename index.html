<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover'>
  <title>v17</title>
</head>

<body>
  <script src='https://static.line-scdn.net/liff/edge/2/sdk.js'></script>
  <script>
    const query = window.location.search.slice(1);
    const data = query.split(',');    
    
    async function main() {
      await liff.init({ liffId: '1657236240-AXK6lOrm' })
      if (liff.isInClient()) {
//         alert('isInClient');
        sendShared()
      } else {
        if (liff.isLoggedIn()) {
//           alert('isLoggedIn');
          sendShared()
        } else {
//           alert('login');
          liff.login()
        }
      }
    }

    async function sendShared() {
      alert('sendShared');
      await liff.shareTargetPicker([
 
        {
          "type": "flex",
          "altText": "Flex Message",
          "contents":

          {
  "type": "bubble",
  "body": {
    "type": "box",
    "layout": "vertical",
    "contents": [
      {
        "type": "box",
        "layout": "horizontal",
        "contents": [
          {
            "type": "text",
            "text": "ระบบรับเรื่องอัตโนมัติ",
            "color": "#1DB446",
            "weight": "bold",
            "flex": 0
          },
          {
            "type": "text",
            "text": "#1",
            "align": "end",
            "color": "#aaaaaa"
          }
        ]
      },
      {
        "type": "text",
        "text": "ปัญหาไฟติดๆดับๆ",
        "weight": "bold",
        "size": "xl",
        "margin": "xs"
      }
    ],
    "paddingAll": "xl"
  },
  "footer": {
    "type": "box",
    "layout": "vertical",
    "contents": [
      {
        "type": "box",
        "layout": "horizontal",
        "contents": [
          {
            "type": "button",
            "action": {
              "type": "postback",
              "label": "รับทราบปัญหา",
              "displayText": "รับเรื่องเรียบร้อย #1",
              "data": "2,รับเรื่อง"
            },
            "style": "primary",
            "height": "sm",
            "flex": 20
          },
          {
            "type": "filler",
            "flex": 1
          },
          {
            "type": "button",
            "action": {
              "type": "uri",
              "label": "ส่งต่อ",
              "uri": "https://liff.line.me/1657234496-bJWNPRva"
            },
            "style": "primary",
            "height": "sm",
            "flex": 20
          }
        ]
      }
    ]
  },
  "styles": {
    "footer": {
      "separator": true
    }
  }
}


        }
      ])
      liff.closeWindow()
    }
    main()

  </script>
</body>

</html>
